<div class="container mt-5">
  <app-back-arrow rutaBack="seccion"></app-back-arrow>

  <div class="row mb-3">
    <div class="col-lg-2 col-md-4 col-sm-6 d-flex flex-wrap gap-2">
      <div class="form-group w-100">
        <label for="estatus" class="form-label">Estatus</label>
        <select id="estatus" class="form-control form-control-sm custom-select" [(ngModel)]="filters.estatus" 
        (change)="applyFilters()">
          <option value="Pendiente">Pendiente</option>
          <option value="Aprobado">Aprobado</option>
          <option value="Denegado">Denegado</option>
        </select>
      </div>
    </div>
    

    <div class="col-lg-4 col-md-6 col-sm-12 d-flex flex-wrap gap-2">
      <div class="form-group w-100">
        <label for="cotizacionNombreProspecto" class="form-label">Cotización, Nombre o Prospecto</label>
        <input id="cotizacionNombreProspecto" type="text" class="form-control form-control-sm"
          [(ngModel)]="filters.cotizacionNombreProspecto" (input)="applyFilters()"  placeholder="Cotización, Nombre o Prospecto"/>
      </div>
    </div>

    <div class="col-lg-2 col-md-4 col-sm-6 d-flex flex-wrap gap-2">
      <div class="form-group w-100">
        <label for="fechaDesde" class="form-label">Fecha Desde</label>
        <input id="fechaDesde"  type="date" class="form-control form-control-sm"
          [(ngModel)]="filters.fechaDesde" (change)="applyFilters()"/>
      </div>
    </div>

    <div class="col-lg-2 col-md-4 col-sm-6 d-flex flex-wrap gap-2">
      <div class="form-group w-100">
        <label for="fechaHasta" class="form-label">Fecha Hasta</label>
        <input id="fechaHasta" type="date" class="form-control form-control-sm"
          [(ngModel)]="filters.fechaHasta"
          (change)="applyFilters()"/>
      </div>
    </div>

    <div class="col-lg-2 col-md-12 d-flex align-items-end">
      <button class="btn btn-light" (click)="applyFilters()">
        <i class="fas fa-search"></i>
      </button>
    </div>
  </div>

  <div class="table-container">
    <table class="table table-striped table-hover">
      <thead class="table-primary text-center">
        <tr>
          <th>Estatus</th>
          <th>Cotización</th>
          <th>Usuario</th>
          <th>Fecha</th>
          <th>Archivo</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of filteredData" class="text-center">
          <td>{{ item.estatus }}</td>
          <td>{{ item.id_cotizacion }}</td>
          <td>{{ item.id_usuario }}</td>
          <td>{{ item.timestamp }}</td>
          <td>
            <i
              class="fas fa-eye"
              (click)="navigateToVista(item)"
              style="cursor: pointer;">
            </i>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
